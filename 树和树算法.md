# 树和树算法 #

## 6.1 目标 ##

- 了解树形数据结构以及其使用方式。
- 了解树如何实现Map数据结构的。
- 使用列表来实现树。
- 使用类和引用来实现树。
- 以递归数据结构的形式来实现树。
- 使用堆来实现优先队列。

## 6.2 树的例子 ##

到目前位置，读者已经学习了一些线性数据结构，比如栈、队列，对于递归也有一些了解了，接下来研究一种常见的数据结构————**树（tree）**。树用于计算机科学的很多领域，包括操作系统，图像，数据库系统以及计算机网络。树形数据结构和自然界中的树有许多相似点。树形数据结构也有根、枝、叶，不同之处在于自然树根在底，而计算机科学中的树形数据结构的根则在顶部，而叶在底部。

在研究树形数据结构之前，先看一些常见的例子。第1个例子是生物学中的分类树。从这个简单的例子可以看出一些树的属性。第一个属性是，树是一种分级结构，即树是按层来构建的，并且顶部更具广泛性，而底部更加具体。最顶层的是界，其下一层是门，再下层是类，以此类推。然而，无论细分到哪一层，所有的生命体都是动物。

![image](http://interactivepython.org/courselib/static/pythonds/_images/biology.png)

注意，可以从树的顶部出发沿着某条由圆圈和箭头构成的路径到达底部。在树的每一层，都可以判断一个问题，然后继续沿着符合答案的路径走下去。

树的第二个属性是，某个节点的子类是跟另一节点的子类无关的。比如说，猫属有家养和野生两个子类，蝇属也有家养和野生两个子类。然而这两个显然是完全无关的。这意味着，更改猫属的子类节点并不会影响蝇属的子类。

第三个属性是，每片叶子都是位移的。从树根出发可以找出且仅能找出一条路径到达某个物种。比如说，动物界-脊椎动物-哺乳动物-食肉动物-猫科-家猫。

另一个读者每天都接触到的树形结构就是文件系统。在文件系统中，目录或者说文件夹是按照树形来构建的。图2是Unix文件系统层级。
![image](http://interactivepython.org/courselib/static/pythonds/_images/directory.png)

文件系统与生物分类树有很多相似点，可以沿着一条路径到达任意目录，该路径唯一地指明了该目录及其内部的文件。树的另一个重要属性，来源于其分级性，就是可以将树的某个部分（被称为**子树（subtree）**）移到另一个位置而对该层以下不造成影响。比如说，可以将整个以/etc/开始的子树从根目录移除，将其连接至usr/，这也会改变httpd的路径名，由/etc/httpd变为了/usr/etc/httpd，但并不会影响其内容以及httpd的子类。

最后一个例子是网页。以下是一个简单的使用HTML的网页。图3是与该网页对应的树形结构。
```HTML
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8" />
    <title>simple</title>
</head>
<body>
<h1>A simple web page</h1>
<ul>
    <li>List item one</li>
    <li>List item two</li>
</ul>
<h2><a href="http://www.cs.luther.edu">Luther CS </a><h2>
</body>
</html>
```
![image](http://interactivepython.org/courselib/static/pythonds/_images/htmltree.png)

HTML源代码和与其对应的树型结构说明了另一种分级结构。注意到，树的每一层都对应了HTML标签内的嵌套。源代码的第一个标签是<html>，最后一个是</html>，页面内所有其它的标签都位于这对标签对内。

## 6.3 术语及定义 ##

现在读者已经接触了几个树形的例子，现在来正式给出树及其构成的定义。

**节点（Node）**
节点是树的基本构成。它可以有名字，称之为“**键（key）**“。节点也可附带其它信息，这些信息被称为”**负载（payload）**“。尽管负载信息与许多算法没什么关系，但它通常是应用树形结构的关键。

**边（Edge）**
边是树的另一种基本构成。边可以将两个节点连接起来，表示这两者之间存在某种关系。每个节点（除了根节点）都有且仅有1条来自于其它节点的入边。每个节点可能有多能出边。

**根（Root）**
树的跟节点是唯一一个没有入边的节点。

**路径（Path）**
路径是由边连接起来的节点的有序列表。

**子节点（Children）**
对于某个节点集，若其入边都来自同一个节点，则该节点集中任意一个都是该节点的子节点。

**父节点（Parent）**
对于某一个节点来说，它是其外边连接的所有节点的父节点。

**兄弟节点（Sibling）**
同一父节点的子节点互为兄弟节点。

**子树（Subtree）**
子树是某个父节点及其所有后代的所有节点、边构成的集合。

**叶节点（Leaf）**
没有子节点的节点被称为叶节点。

**层数（Level）**
某一节点的层数n是指从根节点到达该节点的路径的边数。

**高度（Height）**
树的高度是指树中节点层数的最大值。

使用以上术语，现在可以给出树的正式定义了。实际上，树有两种定义。一种定义由节点和边给出，另一种则是递归定义。

定义1:树是节点及连接节点的边所构成的集合。树具有以下性质：
- 树中必有1个根节点。
- 每个节点n，除了根节点外，都有且仅有1条边外边与另一节点p相连，其中p是n的父节点。
- 从根部出发，有且仅有1条路径到达任意节点。
- 若某棵树的任意节点之多有两个子节点，则称该树为**二叉树（binary tree）**。

图3是一颗符合定义1的树。边上的箭头表明连接方向。
![image](http://interactivepython.org/courselib/static/pythonds/_images/treedef1.png)

定义2:树要么为空，要么包含1个根节点以及0个更多子树。每个子树的根节点都通过边与父树的根节点相连。



